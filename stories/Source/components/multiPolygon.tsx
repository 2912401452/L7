import { LineLayer, PolygonLayer, Scene } from '@antv/l7';
import { GaodeMap, Mapbox } from '@antv/l7-maps';
import * as React from 'react';

function convertRGB2Hex(rgb: number[]) {
  return (
    '#' + rgb.map((r) => ('0' + Math.floor(r).toString(16)).slice(-2)).join('')
  );
}

export default class MultiPolygon extends React.Component {
  private gui: dat.GUI;
  private $stats: Node;
  private scene: Scene;

  public componentWillUnmount() {
    this.scene.destroy();
  }

  public async componentDidMount() {
    const response = await fetch(
      // 'https://gw.alipayobjects.com/os/basement_prod/f79485d8-d86f-4bb3-856d-537b586be06e.json',
      'https://gw.alipayobjects.com/os/basement_prod/619a6f16-ecb0-4fca-9f9a-b06b67f6f02b.json',
    );
    const scene = new Scene({
      id: 'map',
      map: new GaodeMap({
        pitch: 0,
        style: 'dark',
        center: [118.70796203613281, 31.84956532831343],
        zoom: 12,
      }),
    });
    const data = await response.json();
    // console.log(data.features[5]);
    // data.features = data.features.slice(6);
    const layer = new PolygonLayer({
      autoFit: true,
    })
      .source(data)
      // .source({
      //   "type": "FeatureCollection",
      //   "features": [
      //     {
      //       "type": "Feature",
      //       "geometry": {
      //         "type": "Polygon",
      //         "coordinates": [
      //           [
      //             [
      //               120.77635306891,
      //               30.724101690221,
      //               0
      //             ],
      //             [
      //               120.7762750691,
      //               30.723561703888,
      //               0
      //             ],
      //             [
      //               120.77232406917,
      //               30.723597702916,
      //               0
      //             ],
      //             [
      //               120.77109506876,
      //               30.7235147052,
      //               0
      //             ],
      //             [
      //               120.77108606943,
      //               30.723752699288,
      //               0
      //             ],
      //             [
      //               120.77053906909,
      //               30.72372769994,
      //               0
      //             ],
      //             [
      //               120.76927406959,
      //               30.723672701042,
      //               0
      //             ],
      //             [
      //               120.76934906903,
      //               30.723773698488,
      //               0
      //             ],
      //             [
      //               120.76930006953,
      //               30.723889695569,
      //               0
      //             ],
      //             [
      //               120.76871506955,
      //               30.723738699561,
      //               0
      //             ],
      //             [
      //               120.76694306899,
      //               30.723900695172,
      //               0
      //             ],
      //             [
      //               120.76675406884,
      //               30.724130689598,
      //               0
      //             ],
      //             [
      //               120.76683306938,
      //               30.731139519176,
      //               0
      //             ],
      //             [
      //               120.76731206906,
      //               30.740623287754,
      //               0
      //             ],
      //             [
      //               120.77071906901,
      //               30.740450291653,
      //               0
      //             ],
      //             [
      //               120.77472406937,
      //               30.740246297132,
      //               0
      //             ],
      //             [
      //               120.77522406896,
      //               30.73904932611,
      //               0
      //             ],
      //             [
      //               120.77553406948,
      //               30.737387366644,
      //               0
      //             ],
      //             [
      //               120.775429069,
      //               30.734489437681,
      //               0
      //             ],
      //             [
      //               120.77559706923,
      //               30.732567483938,
      //               0
      //             ],
      //             [
      //               120.7756120693,
      //               30.732077496173,
      //               0
      //             ],
      //             [
      //               120.77564206943,
      //               30.731053521125,
      //               0
      //             ],
      //             [
      //               120.77558106933,
      //               30.729099568997,
      //               0
      //             ],
      //             [
      //               120.77573906952,
      //               30.728197590445,
      //               0
      //             ],
      //             [
      //               120.77594006936,
      //               30.727771600943,
      //               0
      //             ],
      //             [
      //               120.77571006921,
      //               30.727633604778,
      //               0
      //             ],
      //             [
      //               120.77633306882,
      //               30.725467657006,
      //               0
      //             ],
      //             [
      //               120.77635706911,
      //               30.724694676455,
      //               0
      //             ],
      //             [
      //               120.7762630694,
      //               30.724677676787,
      //               0
      //             ],
      //             [
      //               120.77636606933,
      //               30.724431682439,
      //               0
      //             ],
      //             [
      //               120.77635306891,
      //               30.724101690221,
      //               0
      //             ]
      //           ],
      //           [
      //             [
      //               120.78582906896,
      //               30.73962431227,
      //               0
      //             ],
      //             [
      //               120.78075606875,
      //               30.740043302046,
      //               0
      //             ],
      //             [
      //               120.77649206883,
      //               30.740156299253,
      //               0
      //             ],
      //             [
      //               120.77655806895,
      //               30.746082154606,
      //               0
      //             ],
      //             [
      //               120.77659106946,
      //               30.749030082542,
      //               0
      //             ],
      //             [
      //               120.77668906937,
      //               30.755218931839,
      //               0
      //             ],
      //             [
      //               120.7766900692,
      //               30.755294929765,
      //               0
      //             ],
      //             [
      //               120.77677806906,
      //               30.760002815113,
      //               0
      //             ],
      //             [
      //               120.77684706956,
      //               30.763676725444,
      //               0
      //             ],
      //             [
      //               120.77693106922,
      //               30.764071715491,
      //               0
      //             ],
      //             [
      //               120.77850006939,
      //               30.763877720881,
      //               0
      //             ],
      //             [
      //               120.78000106889,
      //               30.763923719559,
      //               0
      //             ],
      //             [
      //               120.78126706911,
      //               30.767494632229,
      //               0
      //             ],
      //             [
      //               120.78106206907,
      //               30.767561630413,
      //               0
      //             ],
      //             [
      //               120.7771500695,
      //               30.76884759917,
      //               0
      //             ],
      //             [
      //               120.77726406931,
      //               30.772810502392,
      //               0
      //             ],
      //             [
      //               120.77719506881,
      //               30.774495461324,
      //               0
      //             ],
      //             [
      //               120.77506906915,
      //               30.777083397968,
      //               0
      //             ],
      //             [
      //               120.77807606907,
      //               30.778478364399,
      //               0
      //             ],
      //             [
      //               120.77837906902,
      //               30.778518363155,
      //               0
      //             ],
      //             [
      //               120.78929006934,
      //               30.783340245421,
      //               0
      //             ],
      //             [
      //               120.79258006912,
      //               30.784790210168,
      //               0
      //             ],
      //             [
      //               120.80403806889,
      //               30.789838086536,
      //               0
      //             ],
      //             [
      //               120.80657006933,
      //               30.785639189419,
      //               0
      //             ],
      //             [
      //               120.80679106927,
      //               30.784983205662,
      //               0
      //             ],
      //             [
      //               120.80726206944,
      //               30.782574264547,
      //               0
      //             ],
      //             [
      //               120.80872606913,
      //               30.779160347623,
      //               0
      //             ],
      //             [
      //               120.80891006926,
      //               30.778613361097,
      //               0
      //             ],
      //             [
      //               120.80907106892,
      //               30.778645360213,
      //               0
      //             ],
      //             [
      //               120.81142606891,
      //               30.779116348975,
      //               0
      //             ],
      //             [
      //               120.81145306957,
      //               30.778889354564,
      //               0
      //             ],
      //             [
      //               120.81242706881,
      //               30.77915934739,
      //               0
      //             ],
      //             [
      //               120.81266706902,
      //               30.778689359075,
      //               0
      //             ],
      //             [
      //               120.81422306877,
      //               30.779359342674,
      //               0
      //             ],
      //             [
      //               120.81454406916,
      //               30.778939353179,
      //               0
      //             ],
      //             [
      //               120.81465406876,
      //               30.77889535443,
      //               0
      //             ],
      //             [
      //               120.81680006941,
      //               30.780012327073,
      //               0
      //             ],
      //             [
      //               120.81631606882,
      //               30.780578312863,
      //               0
      //             ],
      //             [
      //               120.81904406908,
      //               30.782179274046,
      //               0
      //             ],
      //             [
      //               120.81921006876,
      //               30.782099275703,
      //               0
      //             ],
      //             [
      //               120.82012306881,
      //               30.780940304439,
      //               0
      //             ],
      //             [
      //               120.8222420688,
      //               30.779044350724,
      //               0
      //             ],
      //             [
      //               120.82267706899,
      //               30.778673359141,
      //               0
      //             ],
      //             [
      //               120.8250490696,
      //               30.775960425999,
      //               0
      //             ],
      //             [
      //               120.82709006887,
      //               30.773821478205,
      //               0
      //             ],
      //             [
      //               120.82853006917,
      //               30.772139519191,
      //               0
      //             ],
      //             [
      //               120.82859706912,
      //               30.77195152339,
      //               0
      //             ],
      //             [
      //               120.8260130688,
      //               30.770295564052,
      //               0
      //             ],
      //             [
      //               120.82687006877,
      //               30.769355587288,
      //               0
      //             ],
      //             [
      //               120.82775306957,
      //               30.768551606328,
      //               0
      //             ],
      //             [
      //               120.82840006948,
      //               30.767794625092,
      //               0
      //             ],
      //             [
      //               120.82924806922,
      //               30.767183639911,
      //               0
      //             ],
      //             [
      //               120.82956306887,
      //               30.767025643638,
      //               0
      //             ],
      //             [
      //               120.8300850691,
      //               30.766907646828,
      //               0
      //             ],
      //             [
      //               120.83112206899,
      //               30.767073642299,
      //               0
      //             ],
      //             [
      //               120.83186506916,
      //               30.767103642221,
      //               0
      //             ],
      //             [
      //               120.83211206903,
      //               30.766588654343,
      //               0
      //             ],
      //             [
      //               120.83212506945,
      //               30.76642065885,
      //               0
      //             ],
      //             [
      //               120.83096706918,
      //               30.766113666077,
      //               0
      //             ],
      //             [
      //               120.830691069,
      //               30.765966669795,
      //               0
      //             ],
      //             [
      //               120.8318870689,
      //               30.764626702071,
      //               0
      //             ],
      //             [
      //               120.83182506897,
      //               30.764508705408,
      //               0
      //             ],
      //             [
      //               120.83101306921,
      //               30.764081715521,
      //               0
      //             ],
      //             [
      //               120.83121306923,
      //               30.76358172742,
      //               0
      //             ],
      //             [
      //               120.83109206885,
      //               30.763485730451,
      //               0
      //             ],
      //             [
      //               120.83162406913,
      //               30.76276574743,
      //               0
      //             ],
      //             [
      //               120.83128806957,
      //               30.762583751955,
      //               0
      //             ],
      //             [
      //               120.83173806893,
      //               30.761936768301,
      //               0
      //             ],
      //             [
      //               120.83159806919,
      //               30.761865769958,
      //               0
      //             ],
      //             [
      //               120.83158806915,
      //               30.76176977205,
      //               0
      //             ],
      //             [
      //               120.83195806904,
      //               30.761185786185,
      //               0
      //             ],
      //             [
      //               120.83188806872,
      //               30.760991791162,
      //               0
      //             ],
      //             [
      //               120.83238006882,
      //               30.759888817599,
      //               0
      //             ],
      //             [
      //               120.83255406889,
      //               30.759835819366,
      //               0
      //             ],
      //             [
      //               120.83485306881,
      //               30.760244809563,
      //               0
      //             ],
      //             [
      //               120.83522506925,
      //               30.760230809735,
      //               0
      //             ],
      //             [
      //               120.83541906942,
      //               30.760145811837,
      //               0
      //             ],
      //             [
      //               120.83580606904,
      //               30.759772820627,
      //               0
      //             ],
      //             [
      //               120.83672306928,
      //               30.75859084962,
      //               0
      //             ],
      //             [
      //               120.8370330689,
      //               30.75795286482,
      //               0
      //             ],
      //             [
      //               120.83712906916,
      //               30.757575874094,
      //               0
      //             ],
      //             [
      //               120.83731706948,
      //               30.757475877026,
      //               0
      //             ],
      //             [
      //               120.83784206919,
      //               30.75752287536,
      //               0
      //             ],
      //             [
      //               120.83800606922,
      //               30.757456877594,
      //               0
      //             ],
      //             [
      //               120.83843806904,
      //               30.755851916172,
      //               0
      //             ],
      //             [
      //               120.83828506888,
      //               30.755732919085,
      //               0
      //             ],
      //             [
      //               120.83816606905,
      //               30.755780917973,
      //               0
      //             ],
      //             [
      //               120.83806606949,
      //               30.755974913461,
      //               0
      //             ],
      //             [
      //               120.83687606944,
      //               30.755997912761,
      //               0
      //             ],
      //             [
      //               120.83656306945,
      //               30.754973937972,
      //               0
      //             ],
      //             [
      //               120.83672906913,
      //               30.754009961081,
      //               0
      //             ],
      //             [
      //               120.83664706911,
      //               30.753562972564,
      //               0
      //             ],
      //             [
      //               120.83587106933,
      //               30.752338002178,
      //               0
      //             ],
      //             [
      //               120.83373706928,
      //               30.74996805985,
      //               0
      //             ],
      //             [
      //               120.83359406916,
      //               30.749953060308,
      //               0
      //             ],
      //             [
      //               120.83324306953,
      //               30.750084057055,
      //               0
      //             ],
      //             [
      //               120.83158306912,
      //               30.750821038877,
      //               0
      //             ],
      //             [
      //               120.83163306935,
      //               30.751102032064,
      //               0
      //             ],
      //             [
      //               120.83138306911,
      //               30.751146031168,
      //               0
      //             ],
      //             [
      //               120.83073506938,
      //               30.749989059514,
      //               0
      //             ],
      //             [
      //               120.83072506933,
      //               30.749820063853,
      //               0
      //             ],
      //             [
      //               120.83233206914,
      //               30.74894908466,
      //               0
      //             ],
      //             [
      //               120.83250906959,
      //               30.749030082542,
      //               0
      //             ],
      //             [
      //               120.83267106907,
      //               30.748864086839,
      //               0
      //             ],
      //             [
      //               120.83239006886,
      //               30.748490096151,
      //               0
      //             ],
      //             [
      //               120.83134006945,
      //               30.74767411564,
      //               0
      //             ],
      //             [
      //               120.83089006919,
      //               30.747915109638,
      //               0
      //             ],
      //             [
      //               120.82928206956,
      //               30.748447097158,
      //               0
      //             ],
      //             [
      //               120.82681206904,
      //               30.749072081502,
      //               0
      //             ],
      //             [
      //               120.82493606872,
      //               30.749914061024,
      //               0
      //             ],
      //             [
      //               120.82305806876,
      //               30.750518046341,
      //               0
      //             ],
      //             [
      //               120.82194506959,
      //               30.750846038145,
      //               0
      //             ],
      //             [
      //               120.82183906929,
      //               30.75081403905,
      //               0
      //             ],
      //             [
      //               120.81857006943,
      //               30.751646019006,
      //               0
      //             ],
      //             [
      //               120.81729506898,
      //               30.752173006514,
      //               0
      //             ],
      //             [
      //               120.81635906937,
      //               30.752413000324,
      //               0
      //             ],
      //             [
      //               120.81493806934,
      //               30.752386001215,
      //               0
      //             ],
      //             [
      //               120.8143710689,
      //               30.750924036714,
      //               0
      //             ],
      //             [
      //               120.80927506913,
      //               30.752456998829,
      //               0
      //             ],
      //             [
      //               120.80860206929,
      //               30.752373001526,
      //               0
      //             ],
      //             [
      //               120.80814106915,
      //               30.751777015766,
      //               0
      //             ],
      //             [
      //               120.8080980695,
      //               30.742568240055,
      //               0
      //             ],
      //             [
      //               120.80808006905,
      //               30.738753333537,
      //               0
      //             ],
      //             [
      //               120.80803706939,
      //               30.734523436641,
      //               0
      //             ],
      //             [
      //               120.80777306891,
      //               30.728363587009,
      //               0
      //             ],
      //             [
      //               120.80781406891,
      //               30.727287612728,
      //               0
      //             ],
      //             [
      //               120.80764106956,
      //               30.726292637257,
      //               0
      //             ],
      //             [
      //               120.80756106919,
      //               30.724460681717,
      //               0
      //             ],
      //             [
      //               120.80576006922,
      //               30.723453706722,
      //               0
      //             ],
      //             [
      //               120.805084069,
      //               30.723696700368,
      //               0
      //             ],
      //             [
      //               120.80054706927,
      //               30.723970693668,
      //               0
      //             ],
      //             [
      //               120.80055206929,
      //               30.728390585902,
      //               0
      //             ],
      //             [
      //               120.80135606956,
      //               30.734556435666,
      //               0
      //             ],
      //             [
      //               120.80156006887,
      //               30.736018399964,
      //               0
      //             ],
      //             [
      //               120.80184706893,
      //               30.738810332081,
      //               0
      //             ],
      //             [
      //               120.80186006935,
      //               30.738939328783,
      //               0
      //             ],
      //             [
      //               120.79892806887,
      //               30.738954328496,
      //               0
      //             ],
      //             [
      //               120.79595506929,
      //               30.738970328085,
      //               0
      //             ],
      //             [
      //               120.79431506897,
      //               30.738979327756,
      //               0
      //             ],
      //             [
      //               120.79089806897,
      //               30.739133324223,
      //               0
      //             ],
      //             [
      //               120.78582906896,
      //               30.73962431227,
      //               0
      //             ]
      //           ]
      //         ]
      //       },
      //       "properties": {
      //         "name": "东栅街道"
      //       }
      //     }
      //   ]
      // })
      .shape('fill')
      .color('red')
      .style({
        opacity: 1.0,
      });
    scene.addLayer(layer);
    console.log(layer);
  }

  public render() {
    return (
      <div
        id="map"
        style={{
          position: 'absolute',
          top: 0,
          left: 0,
          right: 0,
          bottom: 0,
        }}
      />
    );
  }
}
