{"expireTime":9007200829157445000,"key":"transformer-remark-markdown-ast-39727a14ec623ec7ff2e3240d0462862-gatsby-remark-prettiergatsby-remark-prismjsgatsby-remark-external-linksgatsby-remark-autolink-headersgatsby-remark-reading-time-","val":{"type":"root","children":[{"type":"heading","depth":1,"children":[{"type":"link","url":"#使用方法","title":null,"children":[],"data":{"hProperties":{"aria-label":"使用方法 permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"使用方法","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":7,"offset":7},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":7,"offset":7},"indent":[]},"data":{"id":"使用方法","htmlAttributes":{"id":"使用方法"},"hProperties":{"id":"使用方法"}}},{"type":"paragraph","children":[{"type":"text","value":"L7 提供三种使用方式：CDN、Submodule。","position":{"start":{"line":4,"column":1,"offset":9},"end":{"line":4,"column":27,"offset":35},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":9},"end":{"line":4,"column":27,"offset":35},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#通过-cdn-使用","title":null,"children":[],"data":{"hProperties":{"aria-label":"通过 cdn 使用 permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"通过 CDN 使用","position":{"start":{"line":6,"column":4,"offset":40},"end":{"line":6,"column":13,"offset":49},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":37},"end":{"line":6,"column":13,"offset":49},"indent":[]},"data":{"id":"通过-cdn-使用","htmlAttributes":{"id":"通过-cdn-使用"},"hProperties":{"id":"通过-cdn-使用"}}},{"type":"paragraph","children":[{"type":"text","value":"首先在 ","position":{"start":{"line":8,"column":1,"offset":51},"end":{"line":8,"column":5,"offset":55},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;head&gt;</code>","position":{"start":{"line":8,"column":5,"offset":55},"end":{"line":8,"column":13,"offset":63},"indent":[]}},{"type":"text","value":" 中引入 L7 CDN 版本的 JS 和 CSS 文件：","position":{"start":{"line":8,"column":13,"offset":63},"end":{"line":8,"column":41,"offset":91},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":51},"end":{"line":8,"column":41,"offset":91},"indent":[]}},{"type":"html","lang":"html","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>https://gw.alipayobjects.com/os/antv/pkg/_antv.l7-2.0.0-beta.5/dist/l7.js<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":9,"column":1,"offset":92},"end":{"line":13,"column":4,"offset":218},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"如果使用 Mapbox，还需要额外引入 Mapbox 的 JS 和 CSS 文件，这一步可以参考 ","position":{"start":{"line":15,"column":1,"offset":220},"end":{"line":15,"column":50,"offset":269},"indent":[]}},{"type":"link","title":null,"url":"https://docs.mapbox.com/mapbox-gl-js/overview/#quickstart","children":[{"type":"text","value":"Mapbox 文档","position":{"start":{"line":15,"column":51,"offset":270},"end":{"line":15,"column":60,"offset":279},"indent":[]}}],"position":{"start":{"line":15,"column":50,"offset":269},"end":{"line":15,"column":120,"offset":339},"indent":[]},"data":{"hProperties":{"target":"_self","rel":"nofollow"}}},{"type":"text","value":"：","position":{"start":{"line":15,"column":120,"offset":339},"end":{"line":15,"column":121,"offset":340},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":220},"end":{"line":15,"column":121,"offset":340},"indent":[]}},{"type":"html","lang":"html","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">'</span>stylesheet<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token comment\">&lt;!-- 上一步引入的 L7 JS 和 CSS --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>","position":{"start":{"line":16,"column":1,"offset":341},"end":{"line":22,"column":4,"offset":583},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"⚠️高德采用异步加载，因此不需要引入任何额外静态文件。","position":{"start":{"line":23,"column":1,"offset":584},"end":{"line":23,"column":28,"offset":611},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":584},"end":{"line":23,"column":28,"offset":611},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"然后在 ","position":{"start":{"line":25,"column":1,"offset":613},"end":{"line":25,"column":5,"offset":617},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">&lt;body&gt;</code>","position":{"start":{"line":25,"column":5,"offset":617},"end":{"line":25,"column":13,"offset":625},"indent":[]}},{"type":"text","value":" 中定义一个容器并设置一个 ","position":{"start":{"line":25,"column":13,"offset":625},"end":{"line":25,"column":27,"offset":639},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">id</code>","position":{"start":{"line":25,"column":27,"offset":639},"end":{"line":25,"column":31,"offset":643},"indent":[]}},{"type":"text","value":"。通过全局 ","position":{"start":{"line":25,"column":31,"offset":643},"end":{"line":25,"column":37,"offset":649},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">L7</code>","position":{"start":{"line":25,"column":37,"offset":649},"end":{"line":25,"column":41,"offset":653},"indent":[]}},{"type":"text","value":" 这个命名空间可以获取场景 ","position":{"start":{"line":25,"column":41,"offset":653},"end":{"line":25,"column":55,"offset":667},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">L7.Scene</code>","position":{"start":{"line":25,"column":55,"offset":667},"end":{"line":25,"column":65,"offset":677},"indent":[]}},{"type":"text","value":" 和图层 ","position":{"start":{"line":25,"column":65,"offset":677},"end":{"line":25,"column":70,"offset":682},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">L7.PolygonLayer</code>","position":{"start":{"line":25,"column":70,"offset":682},"end":{"line":25,"column":87,"offset":699},"indent":[]}},{"type":"text","value":"：\n⚠️需要获取高德或者 Mapbox 的使用 token 并传入 ","position":{"start":{"line":25,"column":87,"offset":699},"end":{"line":26,"column":33,"offset":733},"indent":[1]}},{"type":"html","value":"<code class=\"language-text\">L7.Scene</code>","position":{"start":{"line":26,"column":33,"offset":733},"end":{"line":26,"column":43,"offset":743},"indent":[]}},{"type":"text","value":" 的构造函数，获取方式如下：","position":{"start":{"line":26,"column":43,"offset":743},"end":{"line":26,"column":57,"offset":757},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":613},"end":{"line":26,"column":57,"offset":757},"indent":[1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"高德地图开发者 Key ","position":{"start":{"line":27,"column":3,"offset":760},"end":{"line":27,"column":15,"offset":772},"indent":[]}},{"type":"link","title":null,"url":"https://lbs.amap.com/dev/key/","children":[{"type":"text","value":"申请方法","position":{"start":{"line":27,"column":16,"offset":773},"end":{"line":27,"column":20,"offset":777},"indent":[]}}],"position":{"start":{"line":27,"column":15,"offset":772},"end":{"line":27,"column":52,"offset":809},"indent":[]},"data":{"hProperties":{"target":"_self","rel":"nofollow"}}}],"position":{"start":{"line":27,"column":3,"offset":760},"end":{"line":27,"column":52,"offset":809},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":758},"end":{"line":27,"column":52,"offset":809},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://docs.mapbox.com/help/how-mapbox-works/access-tokens/#creating-and-managing-access-tokens","children":[{"type":"text","value":"Mapbox Access Tokens","position":{"start":{"line":28,"column":4,"offset":813},"end":{"line":28,"column":24,"offset":833},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":812},"end":{"line":28,"column":123,"offset":932},"indent":[]},"data":{"hProperties":{"target":"_self","rel":"nofollow"}}}],"position":{"start":{"line":28,"column":3,"offset":812},"end":{"line":28,"column":123,"offset":932},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":810},"end":{"line":28,"column":123,"offset":932},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":758},"end":{"line":28,"column":123,"offset":932},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#通过-submodule-使用","title":null,"children":[],"data":{"hProperties":{"aria-label":"通过 submodule 使用 permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"通过 Submodule 使用","position":{"start":{"line":30,"column":4,"offset":937},"end":{"line":30,"column":19,"offset":952},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":934},"end":{"line":30,"column":19,"offset":952},"indent":[]},"data":{"id":"通过-submodule-使用","htmlAttributes":{"id":"通过-submodule-使用"},"hProperties":{"id":"通过-submodule-使用"}}},{"type":"paragraph","children":[{"type":"text","value":"首先通过 ","position":{"start":{"line":32,"column":1,"offset":954},"end":{"line":32,"column":6,"offset":959},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">npm/yarn</code>","position":{"start":{"line":32,"column":6,"offset":959},"end":{"line":32,"column":16,"offset":969},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":954},"end":{"line":32,"column":16,"offset":969},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save @antv/l7\n\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> <span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save @antv/l7</code></pre></div>","position":{"start":{"line":33,"column":1,"offset":970},"end":{"line":38,"column":4,"offset":1048},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"然后就可以使用其中包含的场景和各类图层：","position":{"start":{"line":40,"column":1,"offset":1050},"end":{"line":40,"column":21,"offset":1070},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":1050},"end":{"line":40,"column":21,"offset":1070},"indent":[]}},{"type":"html","lang":"typescript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Scene<span class=\"token punctuation\">,</span> PolygonLayer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@antv/l7'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 获取数据</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 创建场景</span>\n  <span class=\"token keyword\">const</span> scene <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Scene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    center<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">110.19382669582967</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50.258134</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token punctuation\">:</span> <span class=\"token string\">'map'</span><span class=\"token punctuation\">,</span>\n    pitch<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token punctuation\">:</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'amap'</span><span class=\"token punctuation\">,</span>\n    zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    token<span class=\"token punctuation\">:</span> <span class=\"token string\">'pg.xxx'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 高德或者 Mapbox 的 token</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 创建图层</span>\n  <span class=\"token keyword\">const</span> layer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PolygonLayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  layer\n    <span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'#2E8AE6'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'#69D1AB'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'#DAF291'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'#FFD591'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'#FF7A45'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'#CF1D49'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      opacity<span class=\"token punctuation\">:</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 添加图层到场景中</span>\n  scene<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 渲染场景</span>\n  scene<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>","position":{"start":{"line":41,"column":1,"offset":1071},"end":{"line":86,"column":4,"offset":1942},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"L7 目前的文档都通过这种方式使用，可以参考项目中的 stories：","position":{"start":{"line":89,"column":1,"offset":1945},"end":{"line":89,"column":36,"offset":1980},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":1945},"end":{"line":89,"column":36,"offset":1980},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/antvis/L7/blob/next/stories/MapAdaptor/components/AMap.tsx","children":[{"type":"text","value":"高德地图","position":{"start":{"line":90,"column":4,"offset":1984},"end":{"line":90,"column":8,"offset":1988},"indent":[]}}],"position":{"start":{"line":90,"column":3,"offset":1983},"end":{"line":90,"column":88,"offset":2068},"indent":[]},"data":{"hProperties":{"target":"_self","rel":"nofollow"}}}],"position":{"start":{"line":90,"column":3,"offset":1983},"end":{"line":90,"column":88,"offset":2068},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":1981},"end":{"line":90,"column":88,"offset":2068},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/antvis/L7/blob/next/stories/MapAdaptor/components/Mapbox.tsx","children":[{"type":"text","value":"Mapbox","position":{"start":{"line":91,"column":4,"offset":2072},"end":{"line":91,"column":10,"offset":2078},"indent":[]}}],"position":{"start":{"line":91,"column":3,"offset":2071},"end":{"line":91,"column":92,"offset":2160},"indent":[]},"data":{"hProperties":{"target":"_self","rel":"nofollow"}}}],"position":{"start":{"line":91,"column":3,"offset":2071},"end":{"line":91,"column":92,"offset":2160},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":2069},"end":{"line":91,"column":92,"offset":2160},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":1981},"end":{"line":91,"column":92,"offset":2160},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#wip-react","title":null,"children":[],"data":{"hProperties":{"aria-label":"wip react permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"linkReference","identifier":"wip","label":"WIP","referenceType":"shortcut","children":[{"type":"text","value":"WIP","position":{"start":{"line":94,"column":5,"offset":2167},"end":{"line":94,"column":8,"offset":2170},"indent":[]}}],"position":{"start":{"line":94,"column":4,"offset":2166},"end":{"line":94,"column":9,"offset":2171},"indent":[]}},{"type":"text","value":" React","position":{"start":{"line":94,"column":9,"offset":2171},"end":{"line":94,"column":15,"offset":2177},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":2163},"end":{"line":94,"column":15,"offset":2177},"indent":[]},"data":{"id":"wip-react","htmlAttributes":{"id":"wip-react"},"hProperties":{"id":"wip-react"}}},{"type":"paragraph","children":[{"type":"text","value":"React 组件待开发，目前可以暂时以 Submodule 方式使用：","position":{"start":{"line":96,"column":1,"offset":2179},"end":{"line":96,"column":36,"offset":2214},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":2179},"end":{"line":96,"column":36,"offset":2214},"indent":[]}},{"type":"html","lang":"tsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Scene<span class=\"token punctuation\">,</span> PolygonLayer<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@antv/l7'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AMap</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> scene<span class=\"token punctuation\">:</span> Scene<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> scene <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Scene</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      center<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">110.19382669582967</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50.258134</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      id<span class=\"token punctuation\">:</span> <span class=\"token string\">'map'</span><span class=\"token punctuation\">,</span>\n      pitch<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      style<span class=\"token punctuation\">:</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'amap'</span><span class=\"token punctuation\">,</span>\n      zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n      token<span class=\"token punctuation\">:</span> <span class=\"token string\">'pg.xxx'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 高德或者 Mapbox 的 token</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> layer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PolygonLayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    layer\n      <span class=\"token punctuation\">.</span><span class=\"token function\">source</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100000</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'#2E8AE6'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'#69D1AB'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'#DAF291'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'#FFD591'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'#FF7A45'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'#CF1D49'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fill'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">style</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        opacity<span class=\"token punctuation\">:</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    scene<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span>layer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    scene<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene <span class=\"token operator\">=</span> scene<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>map<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          position<span class=\"token punctuation\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span>\n          top<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          left<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          right<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":97,"column":1,"offset":2215},"end":{"line":158,"column":4,"offset":3495},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"⚠️组件 Unmount 时需要通过 ","position":{"start":{"line":160,"column":1,"offset":3497},"end":{"line":160,"column":20,"offset":3516},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">scene.destroy()</code>","position":{"start":{"line":160,"column":20,"offset":3516},"end":{"line":160,"column":37,"offset":3533},"indent":[]}},{"type":"text","value":" 手动销毁场景。","position":{"start":{"line":160,"column":37,"offset":3533},"end":{"line":160,"column":45,"offset":3541},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":3497},"end":{"line":160,"column":45,"offset":3541},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":162,"column":1,"offset":3543}}}}